#!/bin/bash

# Define the path for the image
TARGET_PATH="/usr/share/qemu-server/bootsplash.jpg"

# Base64-encoded image (Replace this string with your actual base64-encoded image)
BASE64_IMAGE="/9j/4AAQSkZJRgABAQEAWgBaAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAHgAoADASIAAhEBAxEB/8QAHQABAAICAwEBAAAAAAAAAAAAAAcIBgkCBAUDAf/EABoBAQADAQEBAAAAAAAAAAAAAAABBQYEAgP/2gAMAwEAAhADEAAAAaqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGSmNNiA13rz0wPHJiIdWsrIecAAATkQaAAuNJRrvbEI1KclwynjYgNd6+NDgAcjikPHXHj2a4VZtxxNHs6Y++EVu5016D0AAAAAAAAAAAAAAAAAy/EMvLdUc2HV2PS8+ZK9kJZhh4v1Tq0dXDCgPWmWzBRTw7tQMQlsN15bDTXl2ffvCa+/ln+AHOxlcLFn0rnYiugsTXYWAyvA85PPrODlmM6KWHJj9yL5zMoV0xzyo0HftxAM6TUQDOlUOUXVtom6EvznKsdO3kPRfRIGiAAAAAAAAAAAAAAAAZfiGXl5a7S9RwvbXbMumVvBdirlo6uGFA2Ja+L+01MBA2H68Nhx71G5nkIoc9TyxYuu9jD510sfXM4Am/OcGzkquDM50qxyUtwYvxCY5zVbfKuHXeL+Sf3N4NmijX7fW1EaaIJg7ETTlpZh6MOnF8DRAAAAAAAAAAAAAAAAMlxobEGu8Xlpn4wWSraNh3V19j0vNDMbiUKGwqt0DBcCn4TXCgslW0LjSVrvGxCNacgCTsugMAAOXESH34tyJVWlqRI0UuH6yfFZcdzpjpB6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAd7oyyRb8J79IrknvqkKel6k5FdetZSv50/PmDICvn3k/HzGOhbTGyvHWs1XgeZbHGyuS0UekPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcuI5uAfv4OTiHLiAHPgP38By4hy4gD/8QALBAAAQMEAQMCBgIDAAAAAAAABQMEBgABAgcQERc2FFASEyAhMjUWYBWgsP/aAAgBAQABBQL/AIK8djWZ2pBE8gzb2iMtk3si7ex2u3sdozqQIQQLinAQjUJ10pMGmejbfCRYqDCH1g9WOTcb+jXsMAFIx29jtdvY7WwoYAFxitcQ8MXinb2O129jtSCCAWoH6LWvlcXCnj6xsOoEeVFGfogc6XyUwcQBymg6aLMlfZof5Xt698Yf87OtMnXapPdjTFM3QKWlY1bWZ97IwE18u5ZiXxC38WNU6ZuGKlQDwim7ZZ4qolmipVsr41pTPLI7uvPLE7fK+XEI2c1jIHV77MhPd455Y5Otst3ES4ta+VxUKdvqGAGQmyyybdOXFUSpJg1u9e442wxkRP4pOPKtSibtkg+SKwO9qdM1mSvskP8AK5xHVpQC7JFKgevcYhntk8kYkfGl/FJr5dxr3XF5DYxKgkMR7wR+tkzVlLcqgHhEejj2TPo/GhUBFTk+hJJHxpL99u399zp/zDef5cR+NqHLiwDITZZbBumVnaKNPyjompUEZ/PLPHNmbRTO6uaSuaCgqdLoUPKtSmDtkg+SOwmzZH2OH+VziRLRcF3tKVAtgWmGW2ASQeS8aX8Umvl3ApS46AO3az9zzr63WFDA7SLiZnMSEne86S/fbt/fc6f8w3n+XEfkigO4s+yLWWRTcJlYIitT8W6GKVBmfpxE5eenD0klmuoKgqy9DxTUWm7eoMUjs2s5R9jh/le3rXyh/wAnOtNAniRTdrnDMxxpfxSa+XcRBy3kUHlcMfRN3zr+/SFRHb13Dya6+aS1EkMch3lWxvlWlMMsTu68Msjt8b486f8AMN5/lza98bipq8Y0MPsi1lkU3CcqDJDirJtZm0nbz55Voh6l2PFNRabt6gxSKzy96dPFnqvskZcpspF3Cjtdwo7RrbgUegXLODhKtVyIEGZW2BG8acTyLZJElUFyNRmVPoq+GbSAEWv88jNbUOhTTiohsIQLhdQXZDiNZbVlAU+xrXszAC4x3Cjtdwo7WwpmAKRjjXJxrH5PtiTj5C5+m1743FzV6xsNeKSeU5ZWwxIOrvnySuSKrifuVG7p2s9V/pQMxmEelJzd4y/3MmzNd7mqlmgpymnksosIfIZKDXaLly2WZrMRzomre18b0klmuo6ZOGOVJIqL3rAc7z9/16rggv8A5dmcwio4aVFNAjZxFyAhHOExPykncqwlSLG7I2aQINn0NJeijwgMxcAT+bUYGhPlrxgm9UsDa3cDcEB0mI4qYPgRtJvYsDFoRcqHFWJTIDgGF++2v0r4r9Ot+nF7/e9+t66/bn4r9eev2q9+v9T/AP/EACkRAAEDAwIEBgMAAAAAAAAAAAECAwQABRESMRMiUKEUISRBkJGxwdH/2gAIAQMBAT8B+CJEthxzhIVk1dJSorGUbmoc8BhKpa/NW1AhQyOhzLozFOjdVKfm3M6Ubdqt9r8IrirOVVe3C4+llPt+TUm1IfaQgHBSK0zrUcjb7FRLy09hDvKe3QplrZlHXsqlMTbYdSNu1QLqJSuGsYV2qJ6248T2zn+fqp9wTCAGMk1qnXU4G30KiWZpnC3eY9uiPQkBK1sI5yKtEJyNqW6ME09FZkEF1OcUAEjA+BP/xAAUEQEAAAAAAAAAAAAAAAAAAACg/9oACAECAQE/ARYf/8QAThAAAQIDAwUIDQgHCQAAAAAAAgEDAAQRBRIhEBMxQVEUIjJhdIGh0SAjJDVCUFNxcpGxssEVM1JiY3PC4QY0Q2CDkqIwgpOUoLCz4vD/2gAIAQEABj8C/wBhXcNXcy0GFaVqsJMA/nm60Ko0VPFNmMPBnGXJlsDFdaXo71M9PXHepnp64LcjZWe/4JgSkPOiw/JTQ3XmSovHx5HppZxJRhs83wL6qtEXam2N7bK3uOW/7RMyjtM4w4TZU0VRf7D5UGcFtwxImpe5W9TatcOxlpl6WbnJk650iJd6tdFNUd6menrjvUz09cTEyzLNycyFM0oku+WuimvJLzM5INvvkR1Mq/SjvUz09cd6menri0nmrMaB1uWcMSSuCoK9jREqq6ovv9yN/WSpeqMwZI4ipeE01pkl0VN852xef8qRJyLeJvHWnQnti81MA67rbpT1LCtvtE0ewk8T2Pytr3kgqLTt4Rwy9cTVmuvG7L5nOghrW6qKiYeuJGYRKE6xdLmX88jg2fNKyDmJAooSKvPDszPuI68MwTaKgoOF0dnni1+Un7ewVZWTmJlE1stKXsjvRP8A+WPqjNzLDku59F0FFclmfc/FciNMNG86ugGxvKsEDgqBjgoklFTJgqp5onqkq9za/SSJGhKnc2r0ljFVXz5NwTUq86TZETZNUotdsPTB4K8DrijXRVaxY1FVPntH9yDs7cbu7TltzqWFzg3a5aIlVhDmO5WvrcJeaO0tds8oeJQpumLYJpIlokCTC3m2wuXtsMMJ+0NBhBTBEwSM9wgljEUT0dPTWL0u6h7R1pzRm5hoXQ2FCnIOV+yc+Cxm32iaPYSeJbH5W17yQsiw4DTiuCd5zRhH69Kf1dUPTLswkzNujcqKUERhGZckNqUDNXk0KVcermyzHKy90ItflJ+3KNoWhULOrvG00vdSQzLPGLOG8lmAqqJ5tUaZn/C/OJMJJlxBl71XXUoq1ph0ZLM+5+KwktJN3l8NxeCCbVhx0jFCQavzjuCr1JxQ/OyzebZVEBFXSVNa5Z/k34kiQ5N+JewT7g/hFi/xvwZSO/mmAWilpVfNHaWqueUPEoU3DFsE0kS0SFCRDPF5Q8Bi/MvE5sTUnNkJ9U3rAdK4dcPPlobFSgjLEiWqwhtmoGmghWiwgToZ8PKDgX5xelnhc2jrTmjNzDQuhsKHJmTNVAEvK0eziXxJY/K2veSFnmGwdcRwQuuaMY/UZT+rrh9h2XSWm2hv0FaiQ7YzrA3GpsM7dTQhVx6+fLMcrL3Qi1+Un7csq6zQTas1HB8+brDkxMOE884tSM1xXsLLT7L4rCsyEsqg2N66HDdX4rBDMostLtFvJT6Pn4+wn+TfiSJDk34l7BPuD+EWL/G/BlILmdYNaqOhU80dpdo55M8ChQdAXAXSJJVIU5E8yXkzxGLkyyTexdS8+RXlTfPnXmTDrjNIu+fK7zaciA2Cma6BFKrCHOnmA8mOJflF2WZFvauteeM5MOi0G0oclpMFQDS6rp7OJPElj8ra95IKiV7eEcAvVEzaLrJtS2YVoSNKX1VUXD1RZ7CLv22VIudfyyzHKy90ItflJ+3LKMieG5dyu3dIqg3VhQfHOyyr2uZFN6XUvF2Flr9l8Vgpe27jYOF2uYBKIHEvFxxuqWUGLQpUXk4LvpdcOSs4yTD4aRLJgir5onqiqdza/SSJGgqvc2r0ljFFTz5U+4P4RYv8b8HYVRaLCBMd1NfW4Sc8dpd7Z5M8ChQdAXAXSJJVIbalRoLwoqBsWtIZYHQ2KDAMIuDIdK/+SGWa0zhoNfOsXZdpA2lrXnjOTDotBtKFCQbp9q58EjOPuk6e0l8S2Y+8ebZbmWzMl1Jejvqz09Ud9WenqgtxmVoTHgiAqI86rD87NFeedWq7E4sk03aBNy84Tl5HXArUKJhX1+uMLUYTmXqg87Py7o0xG4pV6ImnJYM3LG6RNB9Ea4Jkz8oe8X5xkuC4kCT0zuN3wmXhXDn0LHfKX/lXqiT+TFB14L2deALtUwonHryMszExcm5ZshzF1alitKZBlJy9M2bs8Jr0eLiiSGQcSZmhO9nUFUuhTRjx09WSWlnpluTmQrnRIV3y1011x31Z6eqO+rPT1RMSzMyE5MnTNIIrvVrprqytTM4ebYUCbU6Vu1iz25B7dAy4neNEw31MOjsqotFTXFx/utv660L1ww+4CADKXkBNSJo6VhVXBEh99f2hqUA4GBAt5IQWpcGndbla+pIVx90nT2kv7l58QziKl0h2pDjDMtmlcS6pqVcP9ZmoS7Lj5olbrQqS0hQcAmzTSJJRU7AQAVMyWiCKVVVhsXZKYbJxboITSpeXigZZyVeCYLQyTaoS80K0+0bLqaQcG6qQrUpLOzTiJW6yCktIounILbYE4ZLRBFKqsIMww7LkuhHQUcio2BOKiKS3UrRE0rkC7KvFnBvBRtd8m1PH9tuOE6ADZriqTC0NN8Gjji27UOQGZ3FKy4M7sW8RKhIN4qaVhZ07NGZecmlF9iWl85cCiUQd+lzXvsYmlYkcybQvms3Ny94XERVpRxF3hJTRtgZpmRSSVplpTOYl8XlVeE27XGv0aRY/LGffSJV9iyp5xc6/dbmpu8LqUX5v6OFYcFh+YC0ZmyXNyy847V5hyvARf5qQrdp53daClc8V4qao/SGktLuq20B1cGqlUxSi46IlXCkWXJN2Wfcm59V37DqVuomOHg4a6xZLLNnSucm5EXHJghW/W8ujHDRFkcpD2xZjE/LmzSZmc1JTr183iuVFb2FBVUpSBMrLYS2vk8nvkvwM5fom9rpu43YtKSlZKWz79mkSy/Cuv5vFpMdFdUPi8wkq6hreZFKIC7KR+j1nk0qvu2f2tzUIqp3/APjHphXGZM3W9xg43NtsftMKqTt/zpdpBtfJ8tLsytryzNRThNmlSQolayqS75zkyi7biKl3o8f0rhFNWWuuMclOwrXHb2FNX7q//8QALBABAAEDAgUEAgICAwAAAAAAAREAITFBURBhcYGhIJHw8VDBMLFgoLDR4f/aAAgBAQABPyH/AIFcSY5ntgv8mrLilcmHN/xI3sEJwJX39X39VoI5Ic026RWBrngZBySE68I4vcRdFrBAvUtyjFWZM5ZkCnK38B1HkcCQ3SNnT0tEaZkUWnRHXNff1ff1NMaLlwXnRPTPABnTpIIMO1ff1ff1Ne1aboc7npMuRACVoag2Lx+veKjJGBGhjRtwsoF+tR/5lLHd8KMmxKR+5fvFDmO09t/xDpTZZR619opQYbXVswJ40O5KDXG+3jwciXMlIDDzKs7UilAgGqr5fd6FbtCDPZwAW3JNoejw8lwM5vQ6IL0yXpcjZHHDz+ooXJ3JrNydyK/P6nhNCUMVTEki83Jp/G4QEEPNXF0yRUaC57DMhZnF4jvxMoSwGWs1O8Cf1O9EkmF7x307RV0YcEd6XFhGJyqnK9Z25A0Fu+1ELCgNCvPqCUijHvzg69ETFoY6Onauecnv8d/ekxjsJ6b/AIZ1f14GyWw8Dtb0WyFCbsoX5VNZUaUyj0t1L0Tvl93GMZXiGG99205bxvUaBjzoYWHXPC6ewwHQwFtzcPJUav0sd86f26VYa8TkTmYHLLTawKxGiLn/AEH8IYf3gcWPW0ORmB8zQtLUvHfTtVyccAd62He4HQy+KmQDLbpYHC7QhHtPFM2FTeDFLRINutLO2YA71tvVkepjwrBYTg62RSJi0MdHTtTOwXZBnc6Pv+FdX9eBslsnA4YwsmUIm5CluZQ4c/CJIj1t3PRO+X3cZ4wSLRvR1vVyCTiejmUyptsHElNViXn4KfrguEy07+vGkfxBh/eBxY9bw5G6+YoWFBe0dte1WRhyR2red7idHJ5qZAct+lg8LaCJ9p58qhogYcl39HvwWdsSB2rfu7K9XHlVyQN3rZNIiLUz0Ne1M7BZlWdjq+34V0JssIda+0VN9YHWsyBnzKNkwRpj/v6J3y+7jIRYmeKDr3KaDdqi2f7Hn0crm0BA7bm2x/DXemkd8BRYhnkL9SnqDAvI6jucPH6mlcnYit3J2Jr8fqPR94HoTKAuJkrETtKj9zvRIIhe0dte01ZGHJHamISDzIoHKtX6u8GavoGE7z4oTUPJ0BWPfjJ16IiLUz0Ne1WzmI7/AB39qTOG4jpt+FG9ghGFa+vq+uqsQayB5It0msUfywYByCDtwlxlbZAQMQiihsEbA0nRKm6TGVMbYkiVvaI4EpkJ20TfZyVNmjWjkCD5BwkKpPLgmQh+ieGW5iFkmiLydOEglYJzz930RrJt+uyS0GUo04GiPEy6bRojpivr6vr6mmfNyYbxonrMcUBHmghZQvEnmjdoXyaiJL/9/UZciQMJQgAsWD9+81MjLE5t2rFSBwpV0KyhADoLY9qZCFXZGSnjYhI/Yt3mlzHee23+FxpPvYuDZ0bFLodsMswR/uZz90QjdBpc96WccNI5j6AjmnAYA1ak4IPbEi7UNHuUVEZrKO2OqG9TwqSLcgYpwCBhHThOSI5GwGaGuUqCdE4G7m3QpSNAuvBW+iaw5sXDf8+UvtAszcUtgilmE4STffFIElbhCsW7c6VaUDJ+NpELId00giLAXm03MrCduHsyHCZonAnNES42oVsxTVuhUlg3aF8QuBhky6RUulKW4SBIzG9OWp5ke5MIdSlCGvLbLsW6L9q+O2VPiZzciBVkvqzSivECIzM2W5pMVJf0xkB35l2WihsgOzFwsRSoepxKoebS0dZb3rQZZMOmKCaAsLii3J6RSVYwroG8pScn88koUmzFXEnJNqmEmGCbcBhks0jIrupGUq6vAYpMOno1Nquv6JZHVHBFKy8/8T//2gAMAwEAAgADAAAAEPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPMPPPPPPPPNOOPNPOOentfPPPPPPPPPPPPPPPPPPJKLNPKFPOHDDPJPJ/b9ArHvPPPPPPPPPPPPPPPPPGEPFPGPPOPMMPFPC/PuK6N/PPPPPPPPPPPPPPPPPPDLLPHPLPPHLPLPPLGtvXfPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPFOIHJNEFEOPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPDPPPPLHPLPP/EACQRAQABAwMDBQEAAAAAAAAAAAERACExQXGBUWGhUJCR0fCx/9oACAEDAQE/EPYhxSso3g+8cTNT7hgHMarf45o3AzJIkGLwQX1Yow8jqehqha0MG79S0nJ7Sw3deXYoQsSIME+XxtV1iH44irDUhyOMm+v9puJtu79PDSIJbdU75Obd/QlQvamHc+oaTs95dbmnJs1iXFkyjPc870VFcLiUZ0VBgt1f3FNxPF36+WkUQ36B215t29DzRfhgJbPTQe/y0LawBI2M4nL/ACgmLCZ/OzNGDgND2E//xAAaEQACAwEBAAAAAAAAAAAAAAAAEQExUJBB/9oACAECAQE/EOEcCxEUMgZYsJliPBFDxZ4K/wD/xAApEAEBAAEDBAEEAgIDAAAAAAABESEAMVEQQWFxgSBQkfAwoWDBoLCx/9oACAEBAAE/EP8AoVwSqhvywgIRVezD23W7WNQiApOyU37faGrTEiK4jEUxz1wYDunqcnAeeVvzyZxQnWArivRDAwbdH7RdRw4Abs1XGLracCkLewpR7z6dKElMqJCCpoZsn8EFKSzJFTckhTuh9Ec4lGaCQVtayROuDBbeJxGolNbWMgHpAyPLq4TADbrgwT4FLAe7wH4+k1DFSHYA3dBJO1+mE/IvDoUsrZZcksFCV7Zz0zmXhiud/AfGsaoMssivCtaeWKZmyIXofWt0hqknK2Hko/aIEdnKh346/Xv96AhyVbCjaKGKWb6bUTCW1OWBeAduhRkm2EJ6ADBQBoGhf0GiLAcuy58fSCpxgjOFWPSupCxnk2ZjMbz6K9Ci4+CsascGmT7MnwgCjh6NKg4VK/GikSgUHs0kiUih9GmhQMCkfnpY3hDcX0vAxTGMhuWqUwXsMGt5cNazw1zEul6atIeLCjPVFzgao7AG7q08TBrxj8mJw6M24i50RK4I8aBqkCHysaEUoJCODnYCmY9pqmwq7AHwU/Gh5n7EBAPjRqBBt7H+oaEvgLfSbJxdnsutvzVaudxeUOsIrOF9Nh8E+dO943IcrYeSn2aALuJi0ozK3jRfM9II3Vc1WVTUG0DdU2PFIl5uZX9CfXOhU/kJPRgyAUMgI0kveMehh02KKssemFjgddCsByVCrsSvSu9QJbXdiMYYFQgXRi9lgE5tgVK5byECpZcWbMADkA5p/DJJJ+156ncfssTshQSq4jDoFZJFzoiB4AaGuEEHysaxwdiS5w/PHvVSEVHwaewK9702QgTBX/1/jU71cPdJ7KT50l9091Kv5XV0HBJ5A01jEZADzg/scrrCSQH5dPZI9l1t+arVzuLyh0mtvYyriFYWG5x9lgC7iZtKcyk50VzPSk/y1oSVQVLvDuBD4QxhnsIbzsE+udCBlNxQS2xubmunB5YP91fwGwAED6CWUEJ50C3lO8VWIYUBgIAC8vsXKFBPIoNwKb/DJJJ+156ncfukSYiVAomYyaRWai50TAcpNA1SBD5RNZYO1JcZfnjwarQiA+DX0DTvOmHINEdh/BaZVlg5338j0XQcEngGXWfQlAPGT+xyGsAgAny6+iw7Brj8wVcbi8BdBrbyMg5hSljsc/ZYFdnKl346/Xv9aElg2bGBYUYoXfQTH7JMC+ck4R7/AFzoUibAIk0ewTTZMjpsUvDlu4905REXqwhWJ61ed8VjjY2GacyndLCXkshIVAmwB3qBVHY2N8IibPRpEDKJH400iQKh9mgkSFUHo00CDkEr8/RJ+15+gi5xNENkTZ1IeJg14z+BV5NObdRc6JkcsedA1SBD5WNUFWAKhuaQQXFe01LhHDgD7KL863ZmLaP7fbTKUMFTR+LoS+Qs9psvM2Owa2/NRq43F4C67otlfbYPDfnTvePyHA2Hgh9lKtMSorgsAXHHXBosOGQ64ZT0vx3CSWcwAH7GAzgVWvRzBhjuwVQpYSxjFvbEX40ymSLiZy8+JoiyYEkAYKiHHSgeoVI7LYVjuO4oljDp3vC9GyIzfY6cDWE5EhoMRWJgHKGlhLTN4EkEapVsCuk+jxlHKL5Fs7pU0cpR+qayWQXJZc6jHAoDWSmN7GAB1wYLz8OA0kgjDdgi9RkWhAJhwIwZlsOs5JzmkEoLUJgW2fSahipBsibOgMnAvpgX4V5NNIkiKGiDIVh6xopre3AVX41bflQT8EHxrA1ybGT8hqgFqiZuoF7H3rdIapBwNh4IH+F79NR5sBgpY9zvoPwm2SEDlFLcXb/mZt1+dUgsVAhdqOdeMOKrACPv6HERYSANVFADKuvBFiL0L4iurcIUjuQHYyHZ1PW+XopGCiOTvpeQTpkFklIVxU50z9wEUYROgwDOXsAlTwa84sEXAlPPRprx0AAYRRgBXpfVCcLZ5YUO/wB/FGt998MHZe+jPNZwAfeRGAFRdKI6b3rPWEdjaVkDTJ5CkRTFcNByH7iQVgV2Cwh6VGOhAQian3KCDgpltG3V0z5YZot1RwT6ZSyb4FoQxpww8eEcYKBES120aHZVDARCCqWzLRtXVdHIO8UQg4HRMxadRuIkEUCgwNZphK2PvHNu4zrI2M0t7m5KruEQEZwKpVClYis1vEWHB43DiDjsuWFilhhAQKqVpFCtJVtkJkXIwAQ7qq9qAPWYwZXcXZF++7O00SnD41AoNqVTzNKKzKqh7odFJEGibmlyQ1TVebpIrVSq+XoECYUOFNsdRmvPfcZc3nSqq5Xvpa16efm5i8znojUm6qv+J//Z"

# Remove the old image if it exists
if [ -f "$TARGET_PATH" ]; then
  echo "Removing old bootsplash image..."
  rm -f "$TARGET_PATH"
fi

# Decode the base64 string and move the new image to the target location
echo "Decoding base64 and creating new bootsplash image..."
echo "$BASE64_IMAGE" | base64 --decode | tee "$TARGET_PATH" > /dev/null

# Verify if the new image is in place
if [ -f "$TARGET_PATH" ]; then
  echo "New bootsplash image successfully created at $TARGET_PATH"
else
  echo "Failed to create the new bootsplash image"
  exit 1
fi

# Restart Proxmox services
echo "Restarting Proxmox services..."
systemctl restart pve-cluster
systemctl restart pvedaemon
systemctl restart pveproxy
systemctl restart pvestatd
systemctl restart qemu-server

# Verify if services restarted successfully
if [ $? -eq 0 ]; then
  echo "Proxmox services restarted successfully."
else
  echo "Failed to restart some or all Proxmox services."
  exit 1
fi
